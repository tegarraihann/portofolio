import{x as F,k as b,a as G,y as $,c as l,o as i,b as h,d as e,f as c,t as r,e as k,v as D,L as K,g as P,K as R,u,F as z,r as O,z as _,i as w,j as B,S as C,W as S}from"./app-BtfECDGA.js";import{S as d}from"./sweetalert2.esm.all-ePrzfkxH.js";import W from"./AdminNavbar-CM_a1IaR.js";import q from"./AdminSidebar-DeQboqlc.js";const E={class:"flex min-h-screen bg-gray-50"},H={class:"flex-1 flex flex-col"},I={class:"flex-1 p-6 space-y-6"},J={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Y={class:"lg:col-span-2 bg-white rounded-xl shadow p-6 space-y-6"},A={key:0,class:"rounded-lg bg-green-50 border border-green-200 text-green-800 px-4 py-3"},Q={class:"flex flex-col md:flex-row md:items-center md:space-x-4 space-y-3 md:space-y-0"},X={class:"flex-1"},Z=["disabled"],ee={key:1,class:"text-gray-500 text-sm mt-6"},te={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mt-6"},se={class:"h-32 bg-gray-100 flex items-center justify-center overflow-hidden"},oe=["src"],ae={key:1,class:"text-gray-500 text-sm p-4 text-center break-words"},ie={class:"p-3 space-y-1 text-sm text-gray-700 flex-1"},le=["title"],re={class:"text-xs text-gray-500"},ne={class:"text-xs text-gray-500"},de={class:"p-3 border-t flex items-center justify-between space-x-2"},ce=["onClick"],ue=["onClick"],me={key:3,class:"mt-4 flex justify-between items-center text-sm text-gray-600"},ge={class:"space-x-2"},ve={__name:"Index",props:{media:Object,filters:Object},setup(a){var y,v;const f=a,n=F({file:null}),m=b(((y=f.filters)==null?void 0:y.q)||""),g=b(((v=f.filters)==null?void 0:v.type)||""),j=G(),p=$(()=>{var o;return((o=j.props.flash)==null?void 0:o.status)||""}),M=o=>{n.file=o.target.files[0]},T=()=>{n.file&&n.post(route("admin.media.store"),{forceFormData:!0,preserveScroll:!0,onSuccess:()=>{n.reset("file")}})},x=()=>{S.get(route("admin.media.index"),{q:m.value,type:g.value},{preserveScroll:!0,preserveState:!0})},U=async o=>{if(navigator!=null&&navigator.clipboard)try{await navigator.clipboard.writeText(o),d.fire({toast:!0,position:"top-end",icon:"success",title:"URL tersalin",showConfirmButton:!1,timer:1200})}catch{d.fire({icon:"error",title:"Gagal",text:"Gagal menyalin URL"})}},L=o=>{d.fire({title:"Hapus file?",text:"Tindakan ini tidak dapat dibatalkan.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#DC2626",cancelButtonColor:"#6B7280",confirmButtonText:"Ya, hapus",cancelButtonText:"Batal"}).then(t=>{t.isConfirmed&&S.delete(route("admin.media.destroy",o),{preserveScroll:!0,onSuccess:()=>{d.fire({toast:!0,position:"top-end",icon:"success",title:"File dihapus",showConfirmButton:!1,timer:1500})},onError:()=>{d.fire({icon:"error",title:"Gagal",text:"Terjadi kesalahan saat menghapus file"})}})})},N=o=>{if(!o)return"0 B";const t=["B","KB","MB","GB"],s=Math.floor(Math.log(o)/Math.log(1024));return`${(o/Math.pow(1024,s)).toFixed(1)} ${t[s]}`};return(o,t)=>(i(),l("div",E,[h(q),e("div",H,[h(W),e("main",I,[t[9]||(t[9]=e("div",{class:"flex items-center justify-between"},[e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"Media Library"),e("p",{class:"text-gray-600 mt-1"},"Kelola file yang digunakan untuk artikel dan projects.")])],-1)),e("div",J,[e("div",Y,[p.value?(i(),l("div",A,r(p.value),1)):c("",!0),e("div",Q,[e("div",X,[t[2]||(t[2]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Cari",-1)),k(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>m.value=s),onKeyup:K(x,["enter"]),type:"text",placeholder:"Nama file atau mime type",class:"w-full rounded-lg border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},null,544),[[D,m.value]])]),e("div",null,[t[4]||(t[4]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Tipe",-1)),k(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>g.value=s),onChange:x,class:"w-full rounded-lg border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},t[3]||(t[3]=[R('<option value="">Semua</option><option value="image">Image</option><option value="document">Document</option><option value="video">Video</option><option value="other">Other</option>',5)]),544),[[P,g.value]])]),e("div",null,[t[5]||(t[5]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Upload",-1)),e("input",{type:"file",onChange:M},null,32)]),e("button",{type:"button",disabled:u(n).processing||!u(n).file,onClick:T,class:"px-4 py-2 bg-indigo-600 text-white font-semibold rounded-lg shadow hover:bg-indigo-700 transition disabled:opacity-50"}," Upload ",8,Z)]),a.media.data.length===0?(i(),l("div",ee," Belum ada file yang cocok dengan filter. ")):(i(),l("div",te,[(i(!0),l(z,null,O(a.media.data,s=>(i(),l("div",{key:s.id,class:"bg-white border rounded-lg shadow-sm overflow-hidden flex flex-col"},[e("div",se,[s.type==="image"?(i(),l("img",{key:0,src:s.url,alt:"",class:"w-full h-full object-cover"},null,8,oe)):(i(),l("div",ae,r(s.original_name),1))]),e("div",ie,[e("div",{class:"font-semibold truncate",title:s.original_name},r(s.original_name),9,le),e("div",re,r(s.mime_type),1),e("div",ne,r(N(s.size)),1)]),e("div",de,[e("button",{onClick:V=>U(s.url),class:"text-indigo-600 text-sm hover:underline"},"Copy URL",8,ce),e("button",{onClick:V=>L(s.id),class:"text-red-600 text-sm hover:underline"},"Hapus",8,ue)])]))),128))])),a.media.data.length?(i(),l("div",me,[e("span",null,"Menampilkan "+r(a.media.from)+" - "+r(a.media.to)+" dari "+r(a.media.total),1),e("div",ge,[a.media.prev_page_url?(i(),_(u(C),{key:0,href:a.media.prev_page_url,class:"px-3 py-1 border rounded hover:bg-gray-100","preserve-scroll":""},{default:w(()=>t[6]||(t[6]=[B(" Prev ")])),_:1},8,["href"])):c("",!0),a.media.next_page_url?(i(),_(u(C),{key:1,href:a.media.next_page_url,class:"px-3 py-1 border rounded hover:bg-gray-100","preserve-scroll":""},{default:w(()=>t[7]||(t[7]=[B(" Next ")])),_:1},8,["href"])):c("",!0)])])):c("",!0)]),t[8]||(t[8]=e("div",{class:"bg-white rounded-xl shadow p-6 space-y-3"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Tips"),e("ul",{class:"text-sm text-gray-600 space-y-2 list-disc list-inside"},[e("li",null,"Upload gambar maksimal 10MB."),e("li",null,"Gunakan format JPG/PNG/WebP untuk gambar."),e("li",null,"Copy URL untuk dipakai di artikel atau projects."),e("li",null,"Pastikan symlink storage aktif untuk akses /storage/...")])],-1))])])])]))}};export{ve as default};
