import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{k as f,l as L,m as V,n as b,c as B,o as T,d as e}from"./app-Bp-b8TO2.js";const $={class:"w-full max-w-none"},I={class:"flex flex-wrap items-center gap-1 p-2 border border-gray-200 border-b-0 rounded-t-lg bg-white"},R={__name:"RichTextEditor",props:{modelValue:{type:String,default:""}},emits:["update:modelValue"],setup(h,{emit:w}){const c=h,y=w,s=f(null),m=f(null),i=(n,t=null)=>{s.value&&(document.execCommand(n,!1,t),s.value.focus(),a())},H=()=>{a()},x=n=>{b(()=>{a()})},a=()=>{s.value&&y("update:modelValue",s.value.innerHTML)},k=()=>{m.value&&m.value.click()},z=async n=>{if(!n||!n.target||!n.target.files){console.warn("Invalid event object");return}const t=n.target.files[0];if(!t){console.warn("No file selected");return}if(!s.value){console.error("Editor element not found"),alert("Editor not ready. Please try again.");return}try{const o=new FormData;o.append("image",t);let l=null;const d=document.querySelector('meta[name="csrf-token"]');if(d&&d.getAttribute("content")&&(l=d.getAttribute("content")),!l){const r=document.querySelector('meta[name="_token"]');r&&r.getAttribute("content")&&(l=r.getAttribute("content"))}if(!l){const r=document.querySelector('input[name="_token"]');r&&r.value&&(l=r.value)}if(!l&&window.Laravel&&window.Laravel.csrfToken&&(l=window.Laravel.csrfToken),!l&&window.page&&window.page.props&&window.page.props.csrf_token&&(l=window.page.props.csrf_token),console.log("CSRF Token found:",l?"Yes":"No"),!l)throw new Error("CSRF token not found. Please refresh the page and try again.");let g;typeof route=="function"?g=route("admin.articles.uploadImage"):g="/admin/articles/upload-image",console.log("Upload URL:",g);const u=await fetch(g,{method:"POST",headers:{"X-CSRF-TOKEN":l,Accept:"application/json"},body:o});if(console.log("Response status:",u.status),u.ok){const r=await u.json();if(console.log("Response data:",r),r&&r.url){const v=`<img src="${r.url}" alt="Uploaded image" style="max-width: 100%; height: auto; margin: 10px 0;" />`;s.value.focus(),document.execCommand("insertHTML",!1,v),a(),alert("Image uploaded successfully!")}else throw new Error("Invalid response format: missing URL")}else{const r=await u.text();console.error("Error response:",r);let v=`Upload failed with status: ${u.status}`;try{const p=JSON.parse(r);p.message&&(v=p.message)}catch{r&&(v=r)}throw new Error(v)}}catch(o){console.error("Error uploading image:",o),alert(`Error uploading image: ${o.message}`)}finally{n.target&&(n.target.value="")}},C=()=>{const n=window.getSelection();if(!n||n.rangeCount===0){alert("Please select text first");return}const o=n.getRangeAt(0).toString();if(!o){alert("Please select text first");return}const l=prompt("Enter URL:","https://");if(l&&l!=="https://"){const d=`<a href="${l}" target="_blank">${o}</a>`;document.execCommand("insertHTML",!1,d),a()}};return L(()=>c.modelValue,n=>{s.value&&s.value.innerHTML!==n&&(s.value.innerHTML=n||"")}),V(()=>{b(()=>{s.value&&(s.value.innerHTML=c.modelValue||"")})}),(n,t)=>(T(),B("div",$,[e("div",I,[e("button",{onClick:t[0]||(t[0]=o=>i("bold")),class:"p-2 rounded-md hover:bg-gray-100 transition-colors",type:"button",title:"Bold"},t[12]||(t[12]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M6 4v16h5.5c2.8 0 5.5-2.2 5.5-5 0-1.9-1.1-3.6-2.7-4.3C15.4 10.1 16 9.1 16 8c0-2.8-2.2-5-5-5H6zm3 2h2c1.1 0 2 .9 2 2s-.9 2-2 2H9V6zm0 6h2.5c1.4 0 2.5 1.1 2.5 2.5S12.9 17 11.5 17H9v-5z"})],-1)])),e("button",{onClick:t[1]||(t[1]=o=>i("italic")),class:"p-2 rounded-md hover:bg-gray-100 transition-colors",type:"button",title:"Italic"},t[13]||(t[13]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4h-8z"})],-1)])),e("button",{onClick:t[2]||(t[2]=o=>i("underline")),class:"p-2 rounded-md hover:bg-gray-100 transition-colors",type:"button",title:"Underline"},t[14]||(t[14]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z"})],-1)])),t[22]||(t[22]=e("div",{class:"w-px h-6 bg-gray-300 mx-1"},null,-1)),e("button",{onClick:t[3]||(t[3]=o=>i("formatBlock","<h1>")),class:"px-3 py-2 text-sm font-bold rounded-md hover:bg-gray-100 transition-colors",type:"button",title:"Heading 1"}," H1 "),e("button",{onClick:t[4]||(t[4]=o=>i("formatBlock","<h2>")),class:"px-3 py-2 text-sm font-bold rounded-md hover:bg-gray-100 transition-colors",type:"button",title:"Heading 2"}," H2 "),e("button",{onClick:t[5]||(t[5]=o=>i("formatBlock","<h3>")),class:"px-3 py-2 text-sm font-bold rounded-md hover:bg-gray-100 transition-colors",type:"button",title:"Heading 3"}," H3 "),e("button",{onClick:t[6]||(t[6]=o=>i("formatBlock","<p>")),class:"px-3 py-2 text-sm rounded-md hover:bg-gray-100 transition-colors",type:"button",title:"Paragraph"}," P "),t[23]||(t[23]=e("div",{class:"w-px h-6 bg-gray-300 mx-1"},null,-1)),e("button",{onClick:t[7]||(t[7]=o=>i("insertUnorderedList")),class:"p-2 rounded-md hover:bg-gray-100 transition-colors",type:"button",title:"Bullet List"},t[15]||(t[15]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M4 6h2v2H4V6zm4 0h12v2H8V6zM4 11h2v2H4v-2zm4 0h12v2H8v-2zM4 16h2v2H4v-2zm4 0h12v2H8v-2z"})],-1)])),e("button",{onClick:t[8]||(t[8]=o=>i("insertOrderedList")),class:"p-2 rounded-md hover:bg-gray-100 transition-colors",type:"button",title:"Numbered List"},t[16]||(t[16]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V6H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z"})],-1)])),t[24]||(t[24]=e("div",{class:"w-px h-6 bg-gray-300 mx-1"},null,-1)),e("button",{onClick:t[9]||(t[9]=o=>i("justifyLeft")),class:"p-2 rounded-md hover:bg-gray-100 transition-colors",type:"button",title:"Align Left"},t[17]||(t[17]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z"})],-1)])),e("button",{onClick:t[10]||(t[10]=o=>i("justifyCenter")),class:"p-2 rounded-md hover:bg-gray-100 transition-colors",type:"button",title:"Align Center"},t[18]||(t[18]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M7 15v2h10v-2H7zm-4 6h18v-2H3v2zm0-8h18v-2H3v2zm4-6v2h10V7H7zM3 3v2h18V3H3z"})],-1)])),e("button",{onClick:t[11]||(t[11]=o=>i("justifyRight")),class:"p-2 rounded-md hover:bg-gray-100 transition-colors",type:"button",title:"Align Right"},t[19]||(t[19]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M3 21h18v-2H3v2zm6-4h12v-2H9v2zm-6-4h18v-2H3v2zm6-4h12V7H9v2zM3 3v2h18V3H3z"})],-1)])),t[25]||(t[25]=e("div",{class:"w-px h-6 bg-gray-300 mx-1"},null,-1)),e("button",{onClick:k,class:"p-2 rounded-md hover:bg-gray-100 transition-colors",type:"button",title:"Insert Image"},t[20]||(t[20]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"})],-1)])),e("input",{ref_key:"imageInput",ref:m,type:"file",accept:"image/*",onChange:z,class:"hidden"},null,544),e("button",{onClick:C,class:"p-2 rounded-md hover:bg-gray-100 transition-colors",type:"button",title:"Add Link"},t[21]||(t[21]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"})],-1)]))]),e("div",{ref_key:"editor",ref:s,contenteditable:"true",onInput:H,onPaste:x,class:"border border-gray-200 rounded-b-lg bg-white min-h-[400px] p-4 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",style:{"max-width":"none"}},null,544)]))}},U=M(R,[["__scopeId","data-v-94212a65"]]);export{U as R};
